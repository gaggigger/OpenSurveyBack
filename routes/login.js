const express = require('express');
const router = express.Router();
const app = express();
const loginGoogle = require('../services/login-google');
const loginGithub = require('../services/login-github');
const User = require('../services/user');

router.get('/login', async function(req, res, next) {
    const userInfo = await loginGoogle.getpayload('eyJhbGciOiJSUzI1NiIsImtpZCI6IjdkZGY1NGQzMDMyZDFmMGQ0OGMzNjE4ODkyY2E3NGMxYWMzMGFkNzcifQ.eyJhenAiOiIyODg5MjU5NzU1MzAtdXRiOGQ3OTl2dDA2ZnQ5M2owM2FuYjZhMzV0NDAwM2guYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJhdWQiOiIyODg5MjU5NzU1MzAtdXRiOGQ3OTl2dDA2ZnQ5M2owM2FuYjZhMzV0NDAwM2guYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJzdWIiOiIxMDI1MTc2NDc2NjgyMTgxNzAyOTgiLCJlbWFpbCI6InNvbG9mby5yYWxpdGVyYUBnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiYXRfaGFzaCI6InNUQnNKNUhhZ0oya0NVM1Fpa1pQNmciLCJleHAiOjE1MjkyNjI1MDEsImlzcyI6ImFjY291bnRzLmdvb2dsZS5jb20iLCJqdGkiOiI1YzExMmUyMjgzOWMwMmViMDVhN2U5ZmE1ODYwZmM0ODZjNTc3NjQwIiwiaWF0IjoxNTI5MjU4OTAxLCJuYW1lIjoiU29sb2ZvIFJhbGl0ZXJhIiwicGljdHVyZSI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS8tbUtSQTZ2MXBrOHcvQUFBQUFBQUFBQUkvQUFBQUFBQUFBcHMvbzlZTTFKRGxWcHMvczk2LWMvcGhvdG8uanBnIiwiZ2l2ZW5fbmFtZSI6IlNvbG9mbyIsImZhbWlseV9uYW1lIjoiUmFsaXRlcmEiLCJsb2NhbGUiOiJmciJ9.WYVUT_9THLltX8AGGjBH1p5slfQZtLALQIl8ia5fpDqblaMlhmC1BlzwYE76_KkM-EqO_0k4Ovty6Qm2U_fzdzjr_1zIO20YQyJKYqKd973O4LhHJN1ipxetyMJqh0SkJcIGEGwAJkzoyHzr9EzdlOpBT7OA1Ltf2kwUD7p_PAiUNudGwzeTQlHw6gDYyfNc9uwzTZGOj3KePqEFGy6aGdx24RdSHVV8woNnxESsKWtdxQTzGVCBZyH1eC2w_rjs93ye_MrE1WALl-X1Z87AX1sWP6gnQ2tHDmH1n5ujtw0GWlcnS7xW3hdrIeS-7ia_VuMGHampTwoqGeTL_7kpWw');

    //const userInfo = await loginGithub.getpayload('ace317d561d9ac98980d');

    User.addOrUpdate(userInfo);

    res.send([]);
});

module.exports = router;
